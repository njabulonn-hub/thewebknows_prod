(()=>{"use strict";function e(){const t=document.getElementById("blog-articles");if(!t)return;if("undefined"==typeof ARTICLES_DATA)return console.error("ARTICLES_DATA is not loaded. Make sure articles-data.js is loaded before blog-search.js"),void(t.innerHTML='<div class="blog-loading">Error: Article data failed to load. Please refresh the page.</div>');const e=document.getElementById("blog-search-input"),n=document.querySelector('.search-clear-button[data-target="blog-search-input"]'),a=document.getElementById("blog-categories"),r=document.getElementById("search-results-count"),l=document.getElementById("blog-no-results"),d=l?l.dataset.emptyMessage||"No articles found matching your search.":"",s=l?l.dataset.resetLabel||"Clear Search":"",c={rendered:!1};let o="all",i="";function g(h){if(!t)return;if(0===h.length)return l&&(c.rendered||((m=document.createElement("p")).className="blog-no-results__message",m.textContent=d,l.appendChild(m),(m=document.createElement("button")).type="button",m.className="btn btn-secondary",m.textContent=s,m.addEventListener("click",()=>{e&&(e.value="",e.dispatchEvent(new Event("input",{bubbles:!0})),e.focus())}),l.appendChild(m),c.rendered=!0),l.hidden=!1,l.setAttribute("aria-hidden","false")),void(r&&(r.textContent="No articles found"),t.innerHTML="");var m;l&&(c.rendered&&(l.textContent="",c.rendered=!1),l.hidden=!0,l.setAttribute("aria-hidden","true"));const u=document.createDocumentFragment();try{h.forEach(e=>{if(!e||!e.slug||"string"!=typeof e.slug||""===e.slug.trim())return;const n=document.createElement("article"),a=`/insights/${encodeURIComponent(e.slug)}/`;n.className="blog-article-card",n.innerHTML=`
                    <a class="blog-article-card__link" href="${a}">
                        <div class="blog-article-card__category">${e.category}</div>
                        <h2 class="blog-article-card__title">${e.title}</h2>
                        <p class="blog-article-card__excerpt">${e.excerpt}</p>
                        ${Number.isFinite(e.readingTime)?`<div class="blog-article-card__meta"><span class="blog-article-card__reading-time">${e.readingTime} min read</span></div>`:""}
                    </a>
                `,u.appendChild(n)})}catch(e){return console.error("Failed to render articles",e)}t.replaceChildren(u),r&&(i?r.textContent=`Found ${h.length} article${1!==h.length?"s":""}`:r.textContent=`Showing ${h.length} article${1!==h.length?"s":""}`)}function h(){const e=t&&t.dataset&&"true"===t.dataset.ssr;t&&!e&&t.classList.add("is-loading"),requestAnimationFrame(()=>{let n=ARTICLES_DATA;"all"!==o&&(n=n.filter(e=>e.category===o)),g(n=i?n.filter(e=>{const t=i.toLowerCase();return e.title.toLowerCase().includes(t)||e.excerpt.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)}):n),t&&(t.classList.remove("is-loading"),e)&&(t.dataset.ssr="hydrated")})}function m(){var t;e&&n&&(t=n.closest(".search-input-wrapper"))&&(t.dataset.hasValue=""!==e.value.trim()?"true":"false")}function u(t){o=t,a&&a.querySelectorAll(".blog-category-btn").forEach(e=>{e.dataset.category===t?e.classList.add("active"):e.classList.remove("active")}),h()}e&&(e.addEventListener("input",t=>{i=t.target.value.trim().toLowerCase(),h(),m()}),e.addEventListener("change",m)),n&&e&&(n.addEventListener("click",()=>{e.value="",m(),e.dispatchEvent(new Event("input",{bubbles:!0})),e.focus()}),m()),a&&(a.innerHTML="",(p=document.createElement("button")).className="blog-category-btn",p.type="button",p.dataset.category="all",p.textContent="All Articles",p.addEventListener("click",()=>u("all")),a.appendChild(p),getBlogCategories().forEach(e=>{const t=document.createElement("button");t.className="blog-category-btn",t.type="button",t.textContent=e,t.dataset.category=e,t.addEventListener("click",()=>u(e)),a.appendChild(t)})),u(o)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(); 